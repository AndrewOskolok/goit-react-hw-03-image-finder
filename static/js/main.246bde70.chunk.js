(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{23:function(e,t,a){e.exports=a(73)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),l=a.n(r),c=(a(28),a(6)),s=a(17),i=a(18),m=a(22),u=a(20),g=(a(29),a(21)),d=(a(30),function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(g.a)(a,2),l=r[0],c=r[1];return o.a.createElement("header",{className:"Searchbar"},o.a.createElement("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==l&&(t(l),c(""))}},o.a.createElement("button",{type:"submit",className:"SearchForm-button"},o.a.createElement("span",{className:"SearchForm-button-label"},"Search")),o.a.createElement("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",value:l,onChange:function(e){var t=e.target;c(t.value)}})))}),f=(a(31),a(32),function(e){var t=e.smallImg,a=e.largeImg,n=e.openModal;return o.a.createElement("button",{className:"ImageGalleryItem-button",onClick:function(){return n(a)}},o.a.createElement("li",{className:"ImageGalleryItem"},o.a.createElement("img",{src:t,alt:"",className:"ImageGalleryItem-image"})))}),h=function(e){var t=e.images,a=(e.nextPage,e.openModal);return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"ImageGallery"},t.map((function(e){return o.a.createElement(f,{key:e.id,smallImg:e.smallImg,largeImg:e.largeImg,openModal:a})}))))},p=a(5),b=a.n(p);b.a.defaults.baseURL="https://pixabay.com/api";var v=function(e,t){return b.a.get("/?q=".concat(e,"&page=").concat(t,"&key=").concat("17147509-a5fa31b8b32f1069e5373e2b3","&image_type=photo&orientation=horizontal&per_page=").concat(20))},E=a(19),y=a.n(E),I=(a(71),function(e){var t=e.openModalImg,a=e.closeModal;return o.a.createElement("div",{className:"Overlay",onClick:a},o.a.createElement("div",{className:"Modal"},o.a.createElement("img",{src:t,alt:""})))}),M=(a(72),function(e){var t=e.nextPage;return o.a.createElement("button",{className:"Button",onClick:t},"Load more")}),S=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={request:"",images:[],numberPage:1,loading:!0,quantity:0,openModalImg:"",loadMore:!1,messageNotFound:!1},e.onSubmit=function(t){e.setState({request:t,numberPage:1,loading:!0})},e.nextPage=function(){e.setState((function(e){return{numberPage:e.numberPage+1,loading:!0,loadMore:!1}}))},e.openModal=function(t){e.setState({openModalImg:t})},e.closeModal=function(t){"IMG"!==t.target.nodeName&&e.setState({openModalImg:""})},e.handlePressEsc=function(t){"Escape"===t.key&&e.closeModal(t)},e.testServerResponse=function(){var t=e.state,a=t.numberPage,n=t.quantity;Math.ceil(n/20)===a?e.setState({loadMore:!1}):e.setState({loadMore:!0})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.querySelector("body").addEventListener("keyup",this.handlePressEsc),v("",1).then((function(t){var a=t.data,n=a.hits.map((function(e){return{id:e.id,smallImg:e.webformatURL,largeImg:e.largeImageURL}}));e.setState({images:n,quantity:a.total,loading:!1,messageNotFound:0===a.hits.length}),e.testServerResponse()})).catch((function(e){return console.log(e)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.state.loading){var n=this.state,o=n.request,r=n.numberPage;v(o,r).then((function(e){var t=e.data,n=t.hits.map((function(e){return{id:e.id,smallImg:e.webformatURL,largeImg:e.largeImageURL}}));a.setState((function(e){return{images:1===r?n:[].concat(Object(c.a)(e.images),Object(c.a)(n)),loading:!1,quantity:t.total,messageNotFound:0===t.hits.length}})),a.testServerResponse()})).catch((function(e){return console.log(e)}))}}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.loading,n=e.openModalImg,r=e.quantity,l=e.loadMore,c=e.messageNotFound;return o.a.createElement("div",{className:"App"},o.a.createElement(d,{onSubmit:this.onSubmit}),o.a.createElement(h,{images:t,nextPage:this.nextPage,openModal:this.openModal}),a&&o.a.createElement(y.a,{type:"Oval",color:"#3f51b5",height:100,width:100}),l&&0!==r&&o.a.createElement(M,{nextPage:this.nextPage}),!0===c&&o.a.createElement("h2",null,"No results were found for your search"),n&&o.a.createElement(I,{openModalImg:n,closeModal:this.closeModal}))}}]),a}(n.Component);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.246bde70.chunk.js.map